<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WeatherNow - Weather Forecast</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .weather-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .sunny { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .cloudy { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        .rainy { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
        .snowy { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-400 via-purple-500 to-purple-600 min-h-screen">
    <!-- Header -->
    <header class="bg-white/10 backdrop-blur-md border-b border-white/20">
        <div class="max-w-6xl mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
                        <span class="text-2xl">üå§Ô∏è</span>
                    </div>
                    <h1 class="text-2xl font-bold text-white">WeatherNow</h1>
                </div>
                <div class="text-white/80 text-sm">
                    <span id="currentTime"></span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto px-4 py-8">
        <!-- Search Section -->
        <div class="bg-white/10 backdrop-blur-md rounded-2xl p-6 mb-8 border border-white/20">
            <div class="flex flex-col md:flex-row gap-4">
                <div class="flex-1">
                    <input 
                        type="text" 
                        id="cityInput" 
                        placeholder="Enter city name (e.g., London, New York, Tokyo)"
                        class="w-full px-4 py-3 rounded-xl bg-white/20 border border-white/30 text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-transparent"
                    >
                </div>
                <button 
                    id="searchBtn"
                    class="px-8 py-3 bg-white text-purple-600 rounded-xl font-semibold hover:bg-white/90 transition-all duration-200 flex items-center justify-center space-x-2"
                >
                    <span>üîç</span>
                    <span>Search Weather</span>
                </button>
            </div>
        </div>

        <!-- Loading State -->
        <div id="loadingState" class="hidden text-center py-12">
            <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-white"></div>
            <p class="text-white mt-4">Fetching weather data...</p>
        </div>

        <!-- Error State -->
        <div id="errorState" class="hidden bg-red-500/20 backdrop-blur-md rounded-2xl p-6 border border-red-300/30">
            <div class="text-center">
                <span class="text-6xl">‚ùå</span>
                <h3 class="text-xl font-semibold text-white mt-4">City Not Found</h3>
                <p class="text-white/80 mt-2">Please check the spelling and try again.</p>
            </div>
        </div>

        <!-- Weather Display -->
        <div id="weatherDisplay" class="hidden">
            <!-- Main Weather Card -->
            <div id="mainWeatherCard" class="weather-card rounded-2xl p-8 mb-8 text-white">
                <div class="flex flex-col md:flex-row items-center justify-between">
                    <div class="text-center md:text-left mb-6 md:mb-0">
                        <h2 id="cityName" class="text-3xl font-bold mb-2">London</h2>
                        <p id="weatherDescription" class="text-xl opacity-90 mb-4">Partly Cloudy</p>
                        <div class="flex items-center justify-center md:justify-start space-x-4">
                            <span id="weatherIcon" class="text-6xl">‚õÖ</span>
                            <span id="temperature" class="text-6xl font-bold">22¬∞C</span>
                        </div>
                    </div>
                    <div class="text-center">
                        <p class="text-sm opacity-80 mb-2">Feels like</p>
                        <p id="feelsLike" class="text-2xl font-semibold">25¬∞C</p>
                    </div>
                </div>
            </div>

            <!-- Weather Details Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <!-- Humidity -->
                <div class="bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20">
                    <div class="flex items-center justify-between mb-4">
                        <span class="text-3xl">üíß</span>
                        <span class="text-white/70 text-sm font-medium">HUMIDITY</span>
                    </div>
                    <p id="humidity" class="text-2xl font-bold text-white">65%</p>
                    <p class="text-white/70 text-sm mt-1">Comfortable</p>
                </div>

                <!-- Wind Speed -->
                <div class="bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20">
                    <div class="flex items-center justify-between mb-4">
                        <span class="text-3xl">üí®</span>
                        <span class="text-white/70 text-sm font-medium">WIND</span>
                    </div>
                    <p id="windSpeed" class="text-2xl font-bold text-white">12 km/h</p>
                    <p id="windDirection" class="text-white/70 text-sm mt-1">NE</p>
                </div>

                <!-- Pressure -->
                <div class="bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20">
                    <div class="flex items-center justify-between mb-4">
                        <span class="text-3xl">üå°Ô∏è</span>
                        <span class="text-white/70 text-sm font-medium">PRESSURE</span>
                    </div>
                    <p id="pressure" class="text-2xl font-bold text-white">1013 hPa</p>
                    <p class="text-white/70 text-sm mt-1">Normal</p>
                </div>

                <!-- Visibility -->
                <div class="bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20">
                    <div class="flex items-center justify-between mb-4">
                        <span class="text-3xl">üëÅÔ∏è</span>
                        <span class="text-white/70 text-sm font-medium">VISIBILITY</span>
                    </div>
                    <p id="visibility" class="text-2xl font-bold text-white">10 km</p>
                    <p class="text-white/70 text-sm mt-1">Excellent</p>
                </div>
            </div>

            <!-- Additional Info -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Sun Times -->
                <div class="bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20">
                    <h3 class="text-lg font-semibold text-white mb-4 flex items-center">
                        <span class="mr-2">üåÖ</span>
                        Sun Times
                    </h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white/70">Sunrise</span>
                            <span id="sunrise" class="text-white font-medium">06:30 AM</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white/70">Sunset</span>
                            <span id="sunset" class="text-white font-medium">07:45 PM</span>
                        </div>
                    </div>
                </div>

                <!-- Temperature Range -->
                <div class="bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20">
                    <h3 class="text-lg font-semibold text-white mb-4 flex items-center">
                        <span class="mr-2">üå°Ô∏è</span>
                        Temperature Range
                    </h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white/70">High</span>
                            <span id="tempMax" class="text-white font-medium">25¬∞C</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white/70">Low</span>
                            <span id="tempMin" class="text-white font-medium">18¬∞C</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Default Message -->
        <div id="defaultMessage" class="text-center py-16">
            <span class="text-8xl mb-6 block">üåç</span>
            <h2 class="text-3xl font-bold text-white mb-4">Welcome to WeatherNow</h2>
            <p class="text-white/80 text-lg">Search for any city to get detailed weather information</p>
        </div>
    </main>

    <script>
        // OpenWeatherMap API configuration
        const apiKey = "61630095a0c5a0b73b1e98978f7540f0";
        const apiUrl = "https://api.openweathermap.org/data/2.5/weather?units=metric&q=";

        // Weather icon mapping
        const weatherIcons = {
            '01d': '‚òÄÔ∏è', '01n': 'üåô',
            '02d': '‚õÖ', '02n': '‚òÅÔ∏è',
            '03d': '‚òÅÔ∏è', '03n': '‚òÅÔ∏è',
            '04d': '‚òÅÔ∏è', '04n': '‚òÅÔ∏è',
            '09d': 'üåßÔ∏è', '09n': 'üåßÔ∏è',
            '10d': 'üå¶Ô∏è', '10n': 'üåßÔ∏è',
            '11d': '‚õàÔ∏è', '11n': '‚õàÔ∏è',
            '13d': '‚ùÑÔ∏è', '13n': '‚ùÑÔ∏è',
            '50d': 'üå´Ô∏è', '50n': 'üå´Ô∏è'
        };

        // Weather condition background mapping
        const weatherConditions = {
            'clear': 'sunny',
            'clouds': 'cloudy',
            'rain': 'rainy',
            'drizzle': 'rainy',
            'thunderstorm': 'rainy',
            'snow': 'snowy',
            'mist': 'cloudy',
            'fog': 'cloudy',
            'haze': 'cloudy'
        };

        // Convert wind direction from degrees to compass
        function getWindDirection(degrees) {
            const directions = ['N', 'NNE', 'NE', 'ENE', 'E', 'ESE', 'SE', 'SSE', 'S', 'SSW', 'SW', 'WSW', 'W', 'WNW', 'NW', 'NNW'];
            return directions[Math.round(degrees / 22.5) % 16];
        }

        // Convert timestamp to readable time
        function formatTime(timestamp) {
            const date = new Date(timestamp * 1000);
            return date.toLocaleTimeString('en-US', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: true 
            });
        }

        // Get visibility description
        function getVisibilityDescription(visibility) {
            const km = visibility / 1000;
            if (km >= 10) return 'Excellent';
            if (km >= 5) return 'Good';
            if (km >= 2) return 'Moderate';
            return 'Poor';
        }

        // Get humidity description
        function getHumidityDescription(humidity) {
            if (humidity >= 70) return 'High';
            if (humidity >= 40) return 'Comfortable';
            return 'Low';
        }

        // Get pressure description
        function getPressureDescription(pressure) {
            if (pressure >= 1020) return 'High';
            if (pressure >= 1000) return 'Normal';
            return 'Low';
        }

        // DOM elements
        const cityInput = document.getElementById('cityInput');
        const searchBtn = document.getElementById('searchBtn');
        const loadingState = document.getElementById('loadingState');
        const errorState = document.getElementById('errorState');
        const weatherDisplay = document.getElementById('weatherDisplay');
        const defaultMessage = document.getElementById('defaultMessage');
        const mainWeatherCard = document.getElementById('mainWeatherCard');

        // Weather display elements
        const cityName = document.getElementById('cityName');
        const weatherDescription = document.getElementById('weatherDescription');
        const weatherIcon = document.getElementById('weatherIcon');
        const temperature = document.getElementById('temperature');
        const feelsLike = document.getElementById('feelsLike');
        const humidity = document.getElementById('humidity');
        const windSpeed = document.getElementById('windSpeed');
        const windDirection = document.getElementById('windDirection');
        const pressure = document.getElementById('pressure');
        const visibility = document.getElementById('visibility');
        const sunrise = document.getElementById('sunrise');
        const sunset = document.getElementById('sunset');
        const tempMax = document.getElementById('tempMax');
        const tempMin = document.getElementById('tempMin');

        // Update current time
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', { 
                hour12: true, 
                hour: '2-digit', 
                minute: '2-digit',
                second:"2-digit"
            });
            document.getElementById('currentTime').textContent = timeString;
        }

        // Search weather function using real API
        async function searchWeather() {
            const city = cityInput.value.trim();
            
            if (!city) {
                alert('Please enter a city name');
                return;
            }

            // Show loading state
            hideAllStates();
            loadingState.classList.remove('hidden');

            try {
                const response = await fetch(apiUrl + city + `&appid=${apiKey}`);
                
                if (response.status === 404) {
                    showError();
                    return;
                }

                const data = await response.json();
                
                if (data.cod === 200) {
                    displayWeatherFromAPI(data);
                } else {
                    showError();
                }
            } catch (error) {
                console.error('Error fetching weather data:', error);
                showError();
            }
        }

        // Display weather data from API
        function displayWeatherFromAPI(data) {
            hideAllStates();
            
            // Extract data from API response
            const temp = Math.round(data.main.temp);
            const feelsLikeTemp = Math.round(data.main.feels_like);
            const weatherMain = data.weather[0].main.toLowerCase();
            const weatherIcon = data.weather[0].icon;
            const description = data.weather[0].description;
            const windDeg = data.wind.deg || 0;
            const visibilityKm = Math.round(data.visibility / 1000);
            
            // Update main weather card
            cityName.textContent = `${data.name}, ${data.sys.country}`;
            weatherDescription.textContent = description.charAt(0).toUpperCase() + description.slice(1);
            weatherIcon.textContent = weatherIcons[weatherIcon] || 'üå§Ô∏è';
            temperature.textContent = `${temp}¬∞C`;
            feelsLike.textContent = `${feelsLikeTemp}¬∞C`;
            
            // Update weather details
            humidity.textContent = `${data.main.humidity}%`;
            windSpeed.textContent = `${Math.round(data.wind.speed * 3.6)} km/h`; // Convert m/s to km/h
            windDirection.textContent = getWindDirection(windDeg);
            pressure.textContent = `${data.main.pressure} hPa`;
            visibility.textContent = `${visibilityKm} km`;
            sunrise.textContent = formatTime(data.sys.sunrise);
            sunset.textContent = formatTime(data.sys.sunset);
            tempMax.textContent = `${Math.round(data.main.temp_max)}¬∞C`;
            tempMin.textContent = `${Math.round(data.main.temp_min)}¬∞C`;
            
            // Update descriptions
            document.querySelector('#humidity').nextElementSibling.textContent = getHumidityDescription(data.main.humidity);
            document.querySelector('#pressure').nextElementSibling.textContent = getPressureDescription(data.main.pressure);
            document.querySelector('#visibility').nextElementSibling.textContent = getVisibilityDescription(data.visibility);
            
            // Update card background based on weather condition
            const condition = weatherConditions[weatherMain] || 'cloudy';
            mainWeatherCard.className = `weather-card ${condition} rounded-2xl p-8 mb-8 text-white`;
            
            weatherDisplay.classList.remove('hidden');
        }



        // Show error state
        function showError() {
            hideAllStates();
            errorState.classList.remove('hidden');
        }

        // Hide all states
        function hideAllStates() {
            loadingState.classList.add('hidden');
            errorState.classList.add('hidden');
            weatherDisplay.classList.add('hidden');
            defaultMessage.classList.add('hidden');
        }

        // Event listeners
        searchBtn.addEventListener('click', searchWeather);
        
        cityInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchWeather();
            }
        });

        // Initialize
        updateTime();
        setInterval(updateTime, 1000);

        // Real weather API is now active
        console.log('Weather app is now using live OpenWeatherMap API data!');
    </script>
<script>
(function() {
    function c() {
        var b = a.contentDocument || a.contentWindow.document;
        if (b) {
            var d = b.createElement('script');
            d.innerHTML = "window.__CF$cv$params={r:'9608fc6f43d55917',t:'MTc1Mjc0NzQxMC4wMDAwMDA='};" +
                         "var a=document.createElement('script');" +
                         "a.nonce='';" +
                         "a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';" +
                         "document.getElementsByTagName('head')[0].appendChild(a);";
            b.getElementsByTagName('head')[0].appendChild(d);
        }
    }
    
    if (document.body) {
        var a = document.createElement('iframe');
        a.height = 1;
        a.width = 1;
        a.style.position = 'absolute';
        a.style.top = 0;
        a.style.left = 0;
        a.style.border = 'none';
        a.style.visibility = 'hidden';
        document.body.appendChild(a);
        
        if ('loading' !== document.readyState) {
            c();
        } else if (window.addEventListener) {
            document.addEventListener('DOMContentLoaded', c);
        } else {
            var e = document.onreadystatechange || function() {};
            document.onreadystatechange = function(b) {
                e(b);
                if ('loading' !== document.readyState) {
                    document.onreadystatechange = e;
                    c();
                }
            };
        }
    }
})();
</script></body>
</html>
